# 基于 Viem.js 的命令行钱包

这是一个使用 Viem.js 构建的命令行钱包工具，支持在 Sepolia 测试网络上进行 ERC20 代币转账。

## 功能特性

1. **生成私钥** - 生成随机私钥和对应的以太坊地址
2. **查询余额** - 查询 ETH 和 ERC20 代币余额
3. **构建交易** - 构建 ERC20 转账的 EIP 1559 交易
4. **签名交易** - 使用私钥对交易进行签名
5. **发送交易** - 将签名后的交易发送到 Sepolia 网络
6. **一键转账** - 完整流程的 ERC20 代币转账

## 安装和运行

### 1. 安装依赖

```bash
cd cli-wallet
npm install
```

### 2. 配置 RPC 节点

编辑 `index.js` 文件，将 `SEPOLIA_RPC_URL` 替换为您的 Infura 或其他 RPC 服务商提供的 Sepolia 网络 URL：

```javascript
const SEPOLIA_RPC_URL = 'https://sepolia.infura.io/v3/YOUR_INFURA_KEY'
```

### 3. 运行程序

```bash
npm start
# 或者
node index.js
```

## 使用说明

### 1. 生成钱包
- 选择选项 1 生成新的私钥和地址
- 程序会显示生成的私钥、地址和当前余额

### 2. 获取测试代币
- 使用 Sepolia 水龙头获取测试 ETH：https://sepoliafaucet.com/
- 程序默认使用 USDC 代币进行测试（地址：0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238）

### 3. 进行转账
- 选择选项 6 进行一键转账，或按步骤选择 3-5 分别执行
- 输入接收地址和转账数量
- 确认交易并等待确认

## 技术实现

### EIP 1559 交易
程序使用 EIP 1559 交易类型，包含：
- `maxFeePerGas` - 最大 gas 费用
- `maxPriorityFeePerGas` - 优先费用
- 动态 gas 价格计算

### ERC20 转账
- 使用标准的 ERC20 `transfer` 函数
- 自动处理代币精度
- 支持任意 ERC20 代币合约

### 安全特性
- 私钥仅在内存中存储
- 交易签名前需要用户确认
- 支持交易取消

## 注意事项

1. **私钥安全** - 生成的私钥仅用于测试，请勿用于主网
2. **网络费用** - Sepolia 测试网需要少量 ETH 作为 gas 费用
3. **代币精度** - 不同代币的精度可能不同，程序会自动处理
4. **交易确认** - 交易发送后需要等待网络确认

## 故障排除

### 常见错误

1. **RPC 连接失败**
   - 检查网络连接
   - 验证 RPC URL 是否正确

2. **余额不足**
   - 确保账户有足够的 ETH 支付 gas 费用
   - 确保有足够的代币进行转账

3. **交易失败**
   - 检查接收地址格式是否正确
   - 确认代币合约地址有效
   - 检查 gas 限制是否足够

## 开发说明

程序使用以下主要技术：
- **Viem.js** - 以太坊客户端库
- **Sepolia 测试网** - 以太坊测试网络
- **EIP 1559** - 以太坊交易费用机制
- **ERC20** - 以太坊代币标准
